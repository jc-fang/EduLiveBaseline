<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Educational Live Stream</title>
    <link rel="stylesheet" type="text/css" href="./style.css">
    <link rel="stylesheet" type="text/css" href="/dist/progress.css">
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">

    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

    <!-- Popper JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>

    <!-- Latest compiled JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
</head>

<body>
    <nav class="navbar" style="background-color: #17a2b8; color:white">
        <span class="navbar-brand mb-0 h1">Educational Live Stream</span>
        <span class='col align-items-end' id='workerid' style="float:right"> </span>
    </nav>
    <div class="container">
        <div class="row bg-margin">
            <h1>Consent to Participate in Research and Instruction (Learner)</h1>

        </div>
        <div class="row bg-margin">
            <div class>Title of study: Towards Participatory Educational Live Streaming. <br>
              Contact information: If you have any questions about this research, please feel free to contact the investigator at csclab.amt@gmail.com.
            </div>
            <br>

        </div>
        <div class="row bg-margin">
            <h4> Introduction </h4>
        </div>
        <div class="row bg-margin">
            <div>You are being invited to join a research study.  If you agree to be in this research, you will be asked to learn from an educational live stream, and complete a survey. Your taking part in this research should take about 40 minutes.
            </div>
            <div> <b>Taking part in research is completely voluntary.</b> You are free to decline to take part in the project.  You can decline to answer any questions and you can stop taking part in the project at any time.  Whether or not you choose to take part, or answer any question, or stop being in the project, there will be no penalty to you or loss of benefits to which you are otherwise entitled.
            </div>
            <br>
        </div>



        <div class="row bg-margin">
            <h4> Compensation </h4>
        </div>
        <div class="row bg-margin">
            <div class>To thank you for participating in this study and to compensate for your time, you will
                receive $6 payment after you finished learning through the live stream and completed the survey. There is a <span style="color:red">bonus opportunity</span> (receive additional $2) if you are the most interactive learner in this session
        				and make honest and high-quality responses. Note that you must follow the instructions closely at all times when doing
          			this task. Your assignment may be rejected if we detect that you did not pay attention when doing this
          			task or we identify obvious evidence that you were not taking the task seriously.</div>
                <br>
        </div>




        <div class="row bg-margin">
            <div>If you agree to take part in the research, you can save a copy of this page
                to keep for future reference. We have included a more detailed overview below. Please click on the
                "Accept" button at the end of this page if you agree to participate.</div>
                <br>
        </div>

        <div class="row bg-margin" style="color: red">
            <h4> Process, Overview and Instruction (Please read this part carefully)</h4>
        </div>
        <div class="row bg-margin">
          <div>
            In this task, you are asked to learn through the live streaming lecture.
            You will see an embedded video player on the interface.
            <br></br>

            Under the video player, there is a <b>"chat" button</b>. To send a message through chat box, click on the button. Click <b>"Set name"</b>,
            use option 2 <b>With a temporary name</b> and fill in your preferred name (<span style="color:red">must be the same name you used on the Login page</span>), then click <b>"Go"</b>.<br>
            <img src="./image/set-name.gif" alt="GIF of set name" style="width: 370px; border:3px solid #fae7b5">
            <br></br>

            <span style = "color:red"><b>NOTE: </b></span>You need to ask at least two reasonable questions during the live stream through the chat box to receive payment.
            <br></br>
            After the instructor finished the lecture, a <b>"Stop watching" button</b> will show below the real-time transcript. Click to proceed to the next step.
            <br>
            <img src="./image/stop-watching.png" alt="Stop watching button" style="width: 300px; height:200px; border:3px solid #fae7b5">
          </div>
        </div>



        <div class="row bg-margin">
            <div class="col-md-12">
                <button class="btn btn-info btn-block mb-5" id="btn-finish">Accept</button>
            </div>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/6.2.0/firebase.js"></script>
    <script src="./firebase.js"></script>
    <script src="./login.js"></script>
    <script src="./pipelineControl.js"></script>

    <script type="text/javascript">
      // var userID = location.hash.split("#")[1]
      function getCurrentTime() {
          var d = new Date();
          var n = d.getTime();
          return n
      }

      $("#btn-finish").click(function () {
          console.log("clicked finish");
          var userID = location.hash.split("#")[1]
          firebase.database().ref('user/' + userID + '/Time' + '/finishedConsent').set(getCurrentTime());
          firebase.database().ref('course/'+'currNumOfStudent').transaction(function(currNumOfStudent) {
            // currNumOfQ = currNumOfQ+1;
            return (currNumOfStudent || 0) + 1
          }).then(() => {

            window.location = "youtube_audience.html#" + userID;
      		});
          // var userID = location.hash.split("#")[1]
          // window.location = "youtube_audience.html#" + userID;
      });
    </script>

</body>

</html>
